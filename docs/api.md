# 진원봇 API 명세
진원봇은 수집하는 데이터를 외부에서도 접근할 수 있게 REST API를 제공합니다.
아래와 같이 총 3개의 엔드포인트를 노출합니다.  

## GET /version
서버의 이름과 버전을 읽습니다.

### 요청 매개변수
없음

### 응답
```
{
    "name": 서버의 이름 (문자열),
    "version": 서버의 버전 설명 (문자열)
}
```

## GET /latest
가장 최신 커밋 (=가장 최근의 문 상태) 또는 지정한 상태에 일치하는 가장 최신의 커밋 (=가장 최근 문이 열릴 시간 또는 닫힌 시간)을 읽습니다.

### 요청 매개변수
- **status** : URL 쿼리 매개변수 입니다. 
이 매개변수를 지정하지 않거나 유효하지 않은 값을 설정하면 서버는 가장 최신 커밋을 응답합니다.
이 매개변수를 `close`로 지정하면 가장 최근에 닫힌 상태의 커밋을 응답하며 `open`으로 지정하면 가장 최근에 열린 상태의 커밋을 응답합니다.

### 응답
```
{
    "commit_time": 이 커밋이 commit된 시간 (ISO8601 형식의 시간 문자열),
    "event_time": 문 개/폐가 감지된 시간 (ISO8601 형식의 시간 문자열),
    "is_open": 문 개방 여부 (boolean),
    "hash": 이 커밋의 참조 해시 (문자열)
}
```

### 예시 
```
> /latest
{"commit_time":"2020-12-03T13:14:59+09:00","is_open":true,"event_time":"2020-12-03T13:14:59Z","hash":"372fb2c2433bddf9678e9448f7ade41b3fec1573"}

> /latest?status=close
{"commit_time":"2020-12-03T12:13:29+09:00","is_open":false,"event_time":"2020-12-03T12:13:29Z","hash":"7409572ca7bb0a0294cf1d11b41799a4eddae24f"}
```

## GET /commit
커밋을 열거합니다. 열거할 커밋의 갯수를 제한할 수 있습니다.

### 요청 매개변수
- **limit** : URL 쿼리 매개변수 입니다. 열거할 커밋의 갯수 제한을 설정합니다.
이 매개변수를 지정하지 않으면 서버는 갯수 제한을 10으로 설정하고 응답합니다. 또한 유효하지 않은 값이 지정되면 서버를 400으로 응답합니다. `full`이 지정되면 모든 커밋을 열거합니다.

### 응답
`/latest`의 응답과 동일한 형태의 커밋의 배열입니다.

### 예시
```
> /commit?limit=2
[{"commit_time":"2020-12-03T13:14:59+09:00","is_open":true,"event_time":"2020-12-03T13:14:59Z","hash":"372fb2c2433bddf9678e9448f7ade41b3fec1573"},{"commit_time":"2020-12-03T13:14:59+09:00","is_open":true,"event_time":"2020-12-03T13:14:59Z","hash":"372fb2c2433bddf9678e9448f7ade41b3fec1573"}]
```